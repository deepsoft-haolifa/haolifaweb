(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderadd"],{"153b":function(t,e,s){"use strict";var i=s("4b4a"),a=s.n(i);e["a"]=function(t){return new a.a(function(e,s){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){e(i.result)},i.onerror=function(t){s(t)}})}},"158e":function(t,e,s){"use strict";var i=s("4f46"),a=s.n(i);a.a},"4f46":function(t,e,s){},8153:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"apply-buy-add"},[s("div",{staticClass:"content"},[s("div",{staticClass:"title b f-18 mb-10"},[t._v("新增站内信")]),s("div",{staticClass:"flex-v-center"},[s("select-box",{staticClass:"flex-item mr-10",attrs:{hint:"必填",list:t.userList,label:"收件人"},model:{value:t.form.users,callback:function(e){t.$set(t.form,"users",e)},expression:"form.users"}})],1),s("div",{staticClass:"flex-v-center"},[s("input-box",{staticClass:"flex-item mr-10",attrs:{hint:"必填",label:"标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),s("div",{staticClass:"flex-v-center"},[s("input-box",{staticClass:"flex-item mr-10",attrs:{hint:"必填","multi-line":"",label:"内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),s("div",{staticClass:"flex"},[s("btn",{staticClass:"mr-20",attrs:{big:""},on:{click:function(e){t.submit()}}},[t._v("提交")]),s("btn",{attrs:{big:"",flat:""},on:{click:t.reset}},[t._v("重置")])],1)]),t.loading?s("layer",[s("div",{staticClass:"abs t-center",staticStyle:{padding:"20px"}},[s("loading",{attrs:{size:"30"}}),s("div",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.loadingMsg))])],1)]):t._e()],1)},a=[],n={name:"order-create",data:function(){return{loading:!1,form:{users:"",title:"",content:""},userList:[]}},mounted:function(){this.getUserList()},methods:{submit:function(){var t=this;this.form.users&&this.form.title&&this.form.content?this.$http.post("/haolifa/hlmail/sendMail",this.form).then(function(e){t.$toast("新增成功"),t.reset()}).catch(function(e){t.$toast(e.message||e.msg)}):this.$toast("请输入必填项")},getUserList:function(){var t=this;this.$http.get("/haolifa/user?pageNum=1&pageSize=100").then(function(e){t.userList=e.list.map(function(t){return{value:t.id+"-"+t.username,text:t.realName}})})},reset:function(){this.form={users:"",title:"",content:""}}}},o=n,r=(s("f8c6"),s("c46c")),l=Object(r["a"])(o,i,a,!1,null,null,null);l.options.__file="add.vue";e["default"]=l.exports},aa59:function(t,e,s){},b5a9:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"apply-buy-add"},[s("div",{staticClass:"content"},[s("div",{staticClass:"title b f-18 mb-10"},[t._v(t._s(t.form.id?"编辑":"新增")+"订单")]),s("div",{staticClass:"flex",staticStyle:{margin:"50px 0"}},[s("upload-box",{staticStyle:{width:"100%"},attrs:{btnText:"上传订单合同",fileList:t.fileList,onchange:t.uploadFile,onremove:t.removeFile}})],1)]),t.loading?s("layer",[s("div",{staticClass:"abs t-center",staticStyle:{padding:"20px"}},[s("loading",{attrs:{size:"30"}}),s("div",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.loadingMsg))])],1)]):t._e()],1)},a=[],n=s("4b4a"),o=s.n(n),r=(s("c839"),s("153b")),l={name:"order-orderAdd",data:function(){return{loading:!1,fileList:[],form:{orderContractUrl:""}}},mounted:function(){var t=this.$route.query.formId;this.form.id=t},methods:{addItem:function(){this.form.orderProductAssociates.push({}),this.$forceUpdate()},uploadFile:function(t,e){var s=this;this.loading=!0,this.loadingMsg="正在上传",Object(r["a"])(t.source).then(function(e){s.$http.post("/haolifa/order-product/uploadContract",{base64Source:e,fileName:t.name}).then(function(t){s.$toast(s.form.id?"更新成功":"上传成功"),s.loading=!1,s.$router.push("/order"),s.orderContractUrl=t}).catch(function(t){s.$toast(t.msg||t.message),s.loading=!1})})},removeFile:function(){var t=this;return new o.a(function(e,s){t.form.orderContractUrl="",e()})},submit:function(){var t=this;this.form.orderContractUrl?this.$http.post(this.form.id?"/haolifa/purchase-order/update":"/haolifa/order-product/save",this.form).then(function(e){t.$toast(t.form.id?"更新成功":"创建成功"),t.$router.push("/order")}).catch(function(e){t.$toast(e.message||e.msg)}):this.$toast("请上传订单")}}},c=l,u=(s("158e"),s("c46c")),f=Object(u["a"])(c,i,a,!1,null,null,null);f.options.__file="add.vue";e["default"]=f.exports},f8c6:function(t,e,s){"use strict";var i=s("aa59"),a=s.n(i);a.a}}]);
//# sourceMappingURL=orderadd.7c2c0ef9.js.map