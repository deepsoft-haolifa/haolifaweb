{"version":3,"sources":["webpack:///./src/pages/Supporting/product/add.vue?bbd0","webpack:///./src/pages/Supporting/product/add.vue?fce6","webpack:///src/pages/Supporting/product/add.vue","webpack:///./src/pages/Supporting/product/add.vue?36c7","webpack:///./src/pages/Supporting/product/add.vue"],"names":["_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_15_5_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_4_1_0_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_5_0_vue_loader_lib_index_js_vue_loader_options_add_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_15_5_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_4_1_0_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_5_0_vue_loader_lib_index_js_vue_loader_options_add_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","form","id","attrs","label","model","value","callback","$$v","$set","expression","staticStyle","margin","_l","item","i","key","width","list","typeList","on","change","$event","getMaterialList","materialClassifyId","materialList","type","productMaterialList","length","small","click","removeProductMaterialList","_e","directives","name","rawName","bg","addProductMaterialList","multi-line","big","disabled","canSubmit","submit","flat","cancel","staticRenderFns","addvue_type_script_lang_js_","data","changeFlag","productNo","specifications","fitComponent","remark","materialCount","materialGraphNo","replaceMaterialGraphNo","computed","every","v","created","$route","query","undefined","getInfo","getTypeList","methods","push","Math","random","index","splice","_this","console","log","$http","get","concat","then","res","filter","isDelete","map","graphNo","text","_this2","classifyName","dir","_this3","forEach","catch","e","$toast","msg","message","_this4","$confirm","title","color","btns","yes","$router","back","_this5","loading","method","replace","product_addvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/productadd.e92f6391.js","sourcesContent":["import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/_vue-loader@15.5.0@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.5.0@vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/_vue-loader@15.5.0@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.5.0@vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-product-add abs scroll-y\"},[_c('div',{staticClass:\"form-content\"},[_c('div',{staticClass:\"title b f-18\"},[_vm._v(_vm._s(_vm.form.id ? '编辑' : '新增')+\"成品\")]),_c('div',{staticClass:\"flex-v-center\"},[_c('input-box',{staticClass:\"flex-item mr-10\",attrs:{\"label\":\"成品名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('input-box',{staticClass:\"flex-item mr-10\",attrs:{\"label\":\"成品编号（全局唯一）\"},model:{value:(_vm.form.productNo),callback:function ($$v) {_vm.$set(_vm.form, \"productNo\", $$v)},expression:\"form.productNo\"}})],1),_c('div',{staticClass:\"flex-v-center\"},[_c('input-box',{staticClass:\"flex-item mr-10\",attrs:{\"label\":\"适配组件\"},model:{value:(_vm.form.fitComponent),callback:function ($$v) {_vm.$set(_vm.form, \"fitComponent\", $$v)},expression:\"form.fitComponent\"}}),_c('input-box',{staticClass:\"flex-item mr-10\",attrs:{\"label\":\"成品规格（如：DN65，DN80）\"},model:{value:(_vm.form.specifications),callback:function ($$v) {_vm.$set(_vm.form, \"specifications\", $$v)},expression:\"form.specifications\"}})],1),_c('div',{staticClass:\"f-14 c-6 b\",staticStyle:{\"margin\":\"10px 0 5px\"}},[_vm._v(\"选择关联零件\")]),_vm._l((_vm.form.productMaterialList),function(item,i){return _c('div',{key:item.id,staticClass:\"flex-v-center\"},[_c('select-box',{staticStyle:{\"width\":\"25%\"},attrs:{\"list\":_vm.typeList,\"label\":\"零件分类\"},on:{\"change\":function($event){_vm.getMaterialList(item.materialClassifyId, i)}},model:{value:(item.materialClassifyId),callback:function ($$v) {_vm.$set(item, \"materialClassifyId\", $$v)},expression:\"item.materialClassifyId\"}}),_c('select-box',{staticClass:\"flex-item ml-10\",staticStyle:{\"width\":\"25%\"},attrs:{\"list\":_vm.materialList[item.materialClassifyId] || [],\"label\":\"零件图号\"},model:{value:(item.materialGraphNo),callback:function ($$v) {_vm.$set(item, \"materialGraphNo\", $$v)},expression:\"item.materialGraphNo\"}}),_c('select-box',{staticClass:\"flex-item ml-10\",staticStyle:{\"width\":\"25%\"},attrs:{\"list\":_vm.materialList[item.materialClassifyId] || [],\"label\":\"该零件可替换的图号\"},model:{value:(item.replaceMaterialGraphNo),callback:function ($$v) {_vm.$set(item, \"replaceMaterialGraphNo\", $$v)},expression:\"item.replaceMaterialGraphNo\"}}),_c('input-box',{staticClass:\"flex-item ml-10\",attrs:{\"type\":\"number\",\"label\":\"零件数量\"},model:{value:(item.materialCount),callback:function ($$v) {_vm.$set(item, \"materialCount\", $$v)},expression:\"item.materialCount\"}}),(_vm.form.productMaterialList.length > 1)?_c('icon-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){_vm.removeProductMaterialList(i)}}},[_vm._v(\"close\")]):_vm._e()],1)}),_c('div',[_c('icon-btn',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('添加关联零件'),expression:\"'添加关联零件'\"}],attrs:{\"bg\":\"\",\"small\":\"\"},on:{\"click\":_vm.addProductMaterialList}},[_vm._v(\"add\")])],1),_c('div',{staticClass:\"flex-v-center\"},[_c('input-box',{staticClass:\"flex-item mr-10\",attrs:{\"multi-line\":\"\",\"label\":\"备注\"},model:{value:(_vm.form.remark),callback:function ($$v) {_vm.$set(_vm.form, \"remark\", $$v)},expression:\"form.remark\"}})],1),_c('div',{staticClass:\"flex-v-center\",staticStyle:{\"margin\":\"20px 0\"}},[_c('btn',{staticClass:\"mr-20\",attrs:{\"big\":\"\",\"disabled\":!_vm.canSubmit},on:{\"click\":_vm.submit}},[_vm._v(\"提交\")]),_c('btn',{staticClass:\"mr-20\",attrs:{\"big\":\"\",\"flat\":\"\",\"bg\":\"\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"page-product-add abs scroll-y\">\n        <div class=\"form-content\">\n            <div class=\"title b f-18\">{{form.id ? '编辑' : '新增'}}成品</div>\n            <div class=\"flex-v-center\">\n                <input-box v-model=\"form.name\" class=\"flex-item mr-10\" label=\"成品名称\"></input-box>\n                <input-box v-model=\"form.productNo\" class=\"flex-item mr-10\" label=\"成品编号（全局唯一）\"></input-box>\n            </div>\n            <div class=\"flex-v-center\">\n                <input-box v-model=\"form.fitComponent\" class=\"flex-item mr-10\" label=\"适配组件\"></input-box>\n                <input-box v-model=\"form.specifications\" class=\"flex-item mr-10\" label=\"成品规格（如：DN65，DN80）\"></input-box>\n            </div>\n            <div class=\"f-14 c-6 b\" style=\"margin: 10px 0 5px;\">选择关联零件</div>\n            <div class=\"flex-v-center\" v-for=\"(item,i) in form.productMaterialList\" :key=\"item.id\">\n                <select-box\n                    v-model=\"item.materialClassifyId\"\n                    :list=\"typeList\"\n                    @change=\"getMaterialList(item.materialClassifyId, i)\"\n                    style=\"width: 25%\"\n                    label=\"零件分类\"\n                ></select-box>\n                <select-box\n                    v-model=\"item.materialGraphNo\"\n                    :list=\"materialList[item.materialClassifyId] || []\"\n                    class=\"flex-item ml-10\"\n                    style=\"width: 25%\"\n                    label=\"零件图号\"\n                ></select-box>\n                <select-box\n                    v-model=\"item.replaceMaterialGraphNo\"\n                    :list=\"materialList[item.materialClassifyId] || []\"\n                    class=\"flex-item ml-10\"\n                    style=\"width: 25%\"\n                    label=\"该零件可替换的图号\"\n                ></select-box>\n                <input-box v-model=\"item.materialCount\" type=\"number\" class=\"flex-item ml-10\" label=\"零件数量\"></input-box>\n                <icon-btn small v-if=\"form.productMaterialList.length > 1\" @click=\"removeProductMaterialList(i)\">close</icon-btn>\n            </div>\n            <div>\n                <icon-btn bg small v-tooltip=\"'添加关联零件'\" @click=\"addProductMaterialList\">add</icon-btn>\n            </div>\n            <div class=\"flex-v-center\">\n                <input-box v-model=\"form.remark\" class=\"flex-item mr-10\" multi-line label=\"备注\"></input-box>\n            </div>\n            <div class=\"flex-v-center\" style=\"margin: 20px 0;\">\n                <btn big class=\"mr-20\" @click=\"submit\" :disabled=\"!canSubmit\">提交</btn>\n                <btn big flat bg class=\"mr-20\" @click=\"cancel\">取消</btn>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"page-product-add\",\n    data() {\n        return {\n            changeFlag: [],\n            typeList: [],\n            materialList: {},\n            form: {\n                id: \"\",\n                name: \"\",\n                productNo: \"\",\n                specifications: \"\",\n                fitComponent: \"\",\n                remark: \"\",\n                productMaterialList: [\n                    {\n                        materialClassifyId: \"\",\n                        materialCount: \"\",\n                        materialGraphNo: \"\",\n                        replaceMaterialGraphNo: \"\"\n                    }\n                ]\n            }\n        };\n    },\n    computed: {\n        canSubmit() {\n            const { form } = this;\n            return (\n                !!form.name &&\n                !!form.productNo &&\n                form.productMaterialList.every(v => {\n                    return (\n                        v.materialClassifyId &&\n                        v.materialCount &&\n                        v.materialGraphNo\n                    );\n                })\n            );\n        }\n    },\n    created() {\n        let { id } = this.$route.query;\n        if (id !== undefined && this.$route.name === \"product-edit\")\n            this.getInfo(id);\n        this.getTypeList();\n    },\n    methods: {\n        addProductMaterialList() {\n            this.form.productMaterialList.push({\n                id: Math.random(),\n                materialClassifyId: \"\",\n                materialCount: \"\",\n                materialGraphNo: \"\",\n                replaceMaterialGraphNo: \"\"\n            });\n        },\n        removeProductMaterialList(index) {\n            this.form.productMaterialList.splice(index, 1);\n        },\n        getMaterialList(id, i) {\n            console.log(1);\n            this.$http\n                .get(`/haolifa/material/getListByClassifyId/${id}`)\n                .then(res => {\n                    this.$set(\n                        this.materialList,\n                        id,\n                        res\n                            .filter(item => !item.isDelete)\n                            .map(item => {\n                                return {\n                                    value: item.graphNo,\n                                    text: item.graphNo\n                                };\n                            })\n                    );\n                    if (this.changeFlag[i] || !this.$route.query.id) {\n                        this.form.productMaterialList[i].materialCount = \"\";\n                        this.form.productMaterialList[i].materialGraphNo = \"\";\n                        this.form.productMaterialList[\n                            i\n                        ].replaceMaterialGraphNo = \"\";\n                    }\n                    this.changeFlag.splice(i, 1, true);\n                });\n        },\n        getTypeList() {\n            this.$http.get(`/haolifa/material/classify/list`).then(res => {\n                this.typeList = res\n                    .filter(item => !item.isDelete)\n                    .map(item => {\n                        return {\n                            value: item.id,\n                            text: item.classifyName,\n                            list: []\n                        };\n                    });\n                console.dir(res);\n            });\n        },\n        getInfo(id) {\n            this.$http\n                .get(`/haolifa/product/getInfo/${id}`)\n                .then(res => {\n                    for (let key in this.form) {\n                        if (this.form[key] !== undefined)\n                            this.form[key] = res[key];\n                    }\n                    this.changeFlag = this.form.productMaterialList.map(\n                        v => false\n                    );\n                    this.form.productMaterialList.forEach(v => {\n                        this.getMaterialList(v.materialClassifyId);\n                    });\n                })\n                .catch(e => {\n                    this.$toast(e.msg || e.message);\n                });\n        },\n        cancel() {\n            this.$confirm({\n                title: \"您确定要离开此页面吗？\",\n                text: \"您的表单将不会保存\",\n                color: \"red\",\n                btns: [\"取消\", \"离开\"],\n                yes: () => {\n                    this.$router.back();\n                }\n            });\n        },\n        submit() {\n            const { form } = this;\n            this.loading = true;\n            const method = form.id ? \"put\" : \"post\";\n            this.$http[method](\n                `/haolifa/product/${form.id ? \"update\" : \"save\"}`,\n                form\n            )\n                .then(res => {\n                    this.loading = false;\n                    this.$router.replace(\"/product\");\n                })\n                .catch(e => {\n                    this.loading = false;\n                    this.$toast(e.msg || e.message);\n                });\n        }\n    }\n};\n</script>\n\n<style lang=\"less\">\n.page-product-add {\n    padding: 30px 20px;\n    .title {\n        margin-bottom: 20px;\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.5.0@vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.5.0@vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=53a273c8&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.5.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"add.vue\"\nexport default component.exports"],"sourceRoot":""}